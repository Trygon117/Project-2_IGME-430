(()=>{var e={603:e=>{e.exports={sendPost:async(e,a,t)=>{const s=await fetch(e,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(a)}),c=await s.json();c.error&&handleError(c.error),c.redirect&&(window.location=c.redirect),t&&(c.csrfToken=a._csrf,t(c))}}}},a={};function t(s){var c=a[s];if(void 0!==c)return c.exports;var r=a[s]={exports:{}};return e[s](r,r.exports,t),r.exports}(()=>{const e=t(603),a=a=>{a.preventDefault();const t=a.target.querySelector("#user").value,s=a.target.querySelector("#pass").value,c=a.target.querySelector("#_csrf").value;return t&&s?(e.sendPost(a.target.action,{username:t,pass:s,_csrf:c}),!1):(a.target.querySelector("#login-error-span").innerHTML="Username or password is empty!",!1)},s=a=>{a.preventDefault();const t=a.target.querySelector("#user").value,s=a.target.querySelector("#pass").value,c=a.target.querySelector("#pass2").value,r=a.target.querySelector("#_csrf").value;return t&&s&&c?s!==c?(a.target.querySelector("#signup-error-span").innerHTML="Passwords do not match!",!1):(e.sendPost(a.target.action,{username:t,pass:s,pass2:c,_csrf:r}),!1):(a.target.querySelector("#signup-error-span").innerHTML="Username or password is empty!",!1)},c=e=>React.createElement("form",{id:"loginForm",name:"loginForm",onSubmit:a,action:"/login",method:"POST",className:"mainForm box"},React.createElement("div",{className:"title"},React.createElement("h1",null,"Login")),React.createElement("div",{className:"field"},React.createElement("label",{className:"label",htmlFor:"username"},"Username: "),React.createElement("div",{className:"control has-icons-left"},React.createElement("input",{className:"input",id:"user",type:"text",name:"username",placeholder:"Username"}),React.createElement("span",{className:"icon is-small is-left"},React.createElement("i",{className:"fas fa-user"})))),React.createElement("div",{className:"field"},React.createElement("label",{className:"label",htmlFor:"pass"},"Password: "),React.createElement("div",{className:"control has-icons-left"},React.createElement("input",{className:"input",id:"pass",type:"password",name:"pass",placeholder:"Password"}),React.createElement("span",{className:"icon is-small is-left"},React.createElement("i",{className:"fa-solid fa-lock"})))),React.createElement("input",{id:"_csrf",type:"hidden",name:"_csrf",value:e.csrf}),React.createElement("span",{id:"login-error-span",className:"has-text-danger"}),React.createElement("div",{className:"control is-pulled-right"},React.createElement("input",{className:"formSubmit button is-link",type:"submit",value:"Sign in"}))),r=a=>(authenticateUsername=async t=>{const s=t.currentTarget;await e.sendPost("/isUsernameAvailable",{username:t.currentTarget.value,_csrf:a.csrf},(e=>{let a=s.parentElement,t=a.querySelector("#username-success-icon"),c=a.parentElement.querySelector("#isAvailable");e.found?(t.innerHTML='<i class="fa-solid fa-exclamation"></i>',c.innerHTML="This username is taken",c.classList="help is-danger"):(t.innerHTML='<i class="fas fa-check"></i>',c.innerHTML="This username is available",c.classList="help is-success")}))},React.createElement("form",{id:"signupForm",name:"signupForm",onSubmit:s,action:"/signup",method:"POST",className:"mainForm box"},React.createElement("div",{className:"title"},React.createElement("h1",null,"Sign Up")),React.createElement("div",{className:"field"},React.createElement("label",{className:"label",htmlFor:"username"},"Username: "),React.createElement("div",{className:"control has-icons-left has-icons-right"},React.createElement("input",{className:"input",id:"user",type:"text",name:"username",placeholder:"Username",onChange:authenticateUsername}),React.createElement("span",{className:"icon is-small is-left"},React.createElement("i",{className:"fas fa-user"})),React.createElement("span",{id:"username-success-icon",className:"icon is-small is-right"})),React.createElement("p",{id:"isAvailable",className:"help is-success"})),React.createElement("div",{className:"field"},React.createElement("label",{className:"label",htmlFor:"pass"},"Password: "),React.createElement("div",{className:"control has-icons-left"},React.createElement("input",{className:"input",id:"pass",type:"password",name:"pass",placeholder:"Password"}),React.createElement("span",{className:"icon is-small is-left"},React.createElement("i",{className:"fa-solid fa-lock"})))),React.createElement("div",{className:"field"},React.createElement("label",{className:"label",htmlFor:"pass2"},"Password: "),React.createElement("div",{className:"control has-icons-left"},React.createElement("input",{className:"input",id:"pass2",type:"password",name:"pass",placeholder:"Retype Password"}),React.createElement("span",{className:"icon is-small is-left"},React.createElement("i",{className:"fa-solid fa-lock"})))),React.createElement("input",{id:"_csrf",type:"hidden",name:"_csrf",value:a.csrf}),React.createElement("span",{id:"signup-error-span",className:"has-text-danger"}),React.createElement("div",{className:"control is-pulled-right"},React.createElement("input",{className:"formSubmit button is-link",type:"submit",value:"Sign Up"})))),n=e=>(loginButton=a=>(a.preventDefault(),setPageWeight(a),ReactDOM.render(React.createElement(c,{csrf:e.csrf}),document.getElementById("login-content")),!1),signupButton=a=>(a.preventDefault(),setPageWeight(a),ReactDOM.render(React.createElement(r,{csrf:e.csrf}),document.getElementById("login-content")),!1),setPageWeight=e=>{let a=e.currentTarget.parentElement.querySelector("#signup");a.classList.toggle("is-active"),a.classList.toggle("has-text-weight-bold");let t=e.currentTarget.parentElement.querySelector("#login");t.classList.toggle("is-active"),t.classList.toggle("has-text-weight-bold")},clickBurger=e=>{e.preventDefault();try{let a=e.currentTarget.parentElement.parentElement.querySelector("#nav-links");e.currentTarget.classList.toggle("is-active"),a.classList.toggle("is-active")}catch(e){console.log(e)}},React.createElement("nav",{className:"navbar is-white has-shadow"},React.createElement("div",{className:"navbar-brand"},React.createElement("a",{className:"navbar-item",href:"/"},React.createElement("i",{className:"fa-solid fa-scroll"})),React.createElement("a",{className:"navbar-burger",id:"burger",onClick:clickBurger},React.createElement("span",null),React.createElement("span",null),React.createElement("span",null))),React.createElement("div",{className:"navbar-menu",id:"nav-links"},React.createElement("div",{className:"navbar-start"},React.createElement("a",{id:"home",className:"navbar-item",href:"/home"},"Home"),React.createElement("a",{id:"Write",className:"navbar-item",href:"/home"},"Create"),React.createElement("a",{id:"Library",className:"navbar-item",href:"/home"},"Library")),React.createElement("div",{className:"navbar-end"},React.createElement("a",{id:"login",className:"navbar-item is-active has-text-weight-bold",onClick:loginButton},"Login"),React.createElement("a",{id:"signup",className:"navbar-item",onClick:signupButton},"Sign Up")))));window.onload=async()=>{const e=await fetch("/getToken"),a=await e.json();ReactDOM.render(React.createElement(n,{csrf:a.csrfToken}),document.getElementById("navbar")),ReactDOM.render(React.createElement(c,{csrf:a.csrfToken}),document.getElementById("login-content"))}})()})();
(()=>{var e={603:e=>{e.exports={sendPost:async(e,a,t)=>{const s=await fetch(e,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(a)}),n=await s.json();n.error&&handleError(n.error),n.redirect&&(window.location=n.redirect),t&&(n.csrfToken=a._csrf,t(n))}}},316:(e,a,t)=>{const s=t(603),n=t(856),r=e=>{e.preventDefault();const a=e.target.querySelector("#user").value,t=e.target.querySelector("#pass").value,n=e.target.querySelector("#_csrf").value;return a&&t?(s.sendPost(e.target.action,{username:a,pass:t,_csrf:n}),!1):(e.target.querySelector("#login-error-span").innerHTML="Username or password is empty!",!1)},c=e=>{e.preventDefault();const a=e.target.querySelector("#user").value,t=e.target.querySelector("#pass").value,n=e.target.querySelector("#pass2").value,r=e.target.querySelector("#_csrf").value;return a&&t&&n?t!==n?(e.target.querySelector("#signup-error-span").innerHTML="Passwords do not match!",!1):(s.sendPost(e.target.action,{username:a,pass:t,pass2:n,_csrf:r}),!1):(e.target.querySelector("#signup-error-span").innerHTML="Username or password is empty!",!1)},l=e=>React.createElement("form",{id:"loginForm",name:"loginForm",onSubmit:r,action:"/login",method:"POST",className:"mainForm box"},React.createElement("div",{className:"title"},React.createElement("h1",null,"Login")),React.createElement("div",{className:"field"},React.createElement("label",{className:"label",htmlFor:"username"},"Username: "),React.createElement("div",{className:"control has-icons-left"},React.createElement("input",{className:"input",id:"user",type:"text",name:"username",placeholder:"Username"}),React.createElement("span",{className:"icon is-small is-left"},React.createElement("i",{className:"fas fa-user"})))),React.createElement("div",{className:"field"},React.createElement("label",{className:"label",htmlFor:"pass"},"Password: "),React.createElement("div",{className:"control has-icons-left"},React.createElement("input",{className:"input",id:"pass",type:"password",name:"pass",placeholder:"Password"}),React.createElement("span",{className:"icon is-small is-left"},React.createElement("i",{className:"fa-solid fa-lock"})))),React.createElement("input",{id:"_csrf",type:"hidden",name:"_csrf",value:e.csrf}),React.createElement("span",{id:"login-error-span",className:"has-text-danger"}),React.createElement("div",{className:"control is-pulled-right"},React.createElement("input",{className:"formSubmit button is-link",type:"submit",value:"Sign in"}))),i=async e=>{ReactDOM.render(React.createElement(l,{csrf:e.csrf}),document.getElementById("login-content"))},m=e=>(authenticateUsername=async a=>{const t=a.currentTarget;await s.sendPost("/isUsernameAvailable",{username:a.currentTarget.value,_csrf:e.csrf},(e=>{let a=t.parentElement,s=a.querySelector("#username-success-icon"),n=a.parentElement.querySelector("#isAvailable");e.found?(s.innerHTML='<i class="fa-solid fa-exclamation"></i>',n.innerHTML="This username is taken",n.classList="help is-danger"):(s.innerHTML='<i class="fas fa-check"></i>',n.innerHTML="This username is available",n.classList="help is-success")}))},React.createElement("form",{id:"signupForm",name:"signupForm",onSubmit:c,action:"/signup",method:"POST",className:"mainForm box"},React.createElement("div",{className:"title"},React.createElement("h1",null,"Sign Up")),React.createElement("div",{className:"field"},React.createElement("label",{className:"label",htmlFor:"username"},"Username: "),React.createElement("div",{className:"control has-icons-left has-icons-right"},React.createElement("input",{className:"input",id:"user",type:"text",name:"username",placeholder:"Username",onChange:authenticateUsername}),React.createElement("span",{className:"icon is-small is-left"},React.createElement("i",{className:"fas fa-user"})),React.createElement("span",{id:"username-success-icon",className:"icon is-small is-right"})),React.createElement("p",{id:"isAvailable",className:"help is-success"})),React.createElement("div",{className:"field"},React.createElement("label",{className:"label",htmlFor:"pass"},"Password: "),React.createElement("div",{className:"control has-icons-left"},React.createElement("input",{className:"input",id:"pass",type:"password",name:"pass",placeholder:"Password"}),React.createElement("span",{className:"icon is-small is-left"},React.createElement("i",{className:"fa-solid fa-lock"})))),React.createElement("div",{className:"field"},React.createElement("label",{className:"label",htmlFor:"pass2"},"Password: "),React.createElement("div",{className:"control has-icons-left"},React.createElement("input",{className:"input",id:"pass2",type:"password",name:"pass",placeholder:"Retype Password"}),React.createElement("span",{className:"icon is-small is-left"},React.createElement("i",{className:"fa-solid fa-lock"})))),React.createElement("input",{id:"_csrf",type:"hidden",name:"_csrf",value:e.csrf}),React.createElement("span",{id:"signup-error-span",className:"has-text-danger"}),React.createElement("div",{className:"control is-pulled-right"},React.createElement("input",{className:"formSubmit button is-link",type:"submit",value:"Sign Up"})))),o=async e=>{ReactDOM.render(React.createElement(m,{csrf:e.csrf}),document.getElementById("login-content"))};window.onload=async()=>{const e=await fetch("/getToken"),a=await e.json();ReactDOM.render(React.createElement(l,{csrf:a.csrfToken}),document.getElementById("login-content")),ReactDOM.render(React.createElement(n.Navbar,{csrf:a.csrfToken}),document.getElementById("navbar"));const t={renderLoginWindow:i,renderSignUpWindow:o};n.initializeNavbar(t,a.csrfToken)},e.exports={LoginWindow:l,SignupWindow:m}},856:e=>{e.exports={Navbar:e=>(updateSelectedPage=e=>{Array.from(e.currentTarget.parentElement.children).forEach((e=>e.classList="navbar-item is-tab")),e.currentTarget.classList="navbar-item is-tab is-active"},clickBurger=e=>{e.preventDefault();try{let a=e.currentTarget.parentElement.parentElement.querySelector("#nav-links");e.currentTarget.classList.toggle("is-active"),a.classList.toggle("is-active")}catch(e){console.log(e)}},React.createElement("nav",{className:"navbar is-dark has-shadow"},React.createElement("div",{className:"navbar-brand"},React.createElement("a",{className:"navbar-item",href:"/"},React.createElement("i",{className:"fa-solid fa-scroll"})),React.createElement("a",{className:"navbar-burger",id:"burger",onClick:clickBurger},React.createElement("span",null),React.createElement("span",null),React.createElement("span",null))),React.createElement("div",{className:"navbar-menu",id:"nav-links"},React.createElement("div",{className:"navbar-start"},React.createElement("a",{id:"home",className:"navbar-item is-tab",href:"/home"},"Home"),React.createElement("a",{id:"Write",className:"navbar-item is-tab",href:"/home"},"Create"),React.createElement("a",{id:"Library",className:"navbar-item is-tab",href:"/home"},"Library")),React.createElement("div",{className:"navbar-end"},React.createElement("a",{id:"login",className:"navbar-item is-tab",onClick:updateSelectedPage},"Login"),React.createElement("a",{id:"signup",className:"navbar-item is-tab",onClick:updateSelectedPage},"Sign Up"),React.createElement("a",{id:"signout",className:"navbar-item is-tab"},"Sign Out"))))),initializeNavbar:async(e,a)=>{let t=await fetch("/isLoggedIn"),s=await t.json();const n=document.querySelector("header").getAttribute("data-current-page");Array.from(document.querySelector(".navbar-start").children).concat(Array.from(document.querySelector(".navbar-end").children)).forEach((e=>{e.id===n?e.classList="navbar-item is-tab is-active":e.classList="navbar-item is-tab"}));let r=document.getElementById("signout"),c=document.getElementById("signup"),l=document.getElementById("login");if(s.LoggedIn)r.style.display="flex",c.style.display="none",l.style.display="none",signoutButton=async e=>{e.preventDefault(),setPageWeight(e),await fetch("/logout")};else{r.style.display="none",c.style.display="flex",l.style.display="flex";let t=!1;null!=document.getElementById("login-content")&&(t=!0),l.addEventListener("click",(async s=>(s.preventDefault(),t?(await e.renderLoginWindow({_csrf:a}),!1):(await fetch("/login"),!1)))),c.addEventListener("click",(async s=>(s.preventDefault(),t?(await e.renderSignUpWindow({_csrf:a}),!1):(await fetch("/login"),await e.renderSignUpWindow({_csrf:a}),!1))))}}}}},a={};!function t(s){var n=a[s];if(void 0!==n)return n.exports;var r=a[s]={exports:{}};return e[s](r,r.exports,t),r.exports}(316)})();
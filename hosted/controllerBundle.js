/*! For license information please see controllerBundle.js.LICENSE.txt */
(()=>{var e={832:(e,t,n)=>{const r=n(603),a=n(764).lW,i=e=>React.createElement("div",null,React.createElement("div",{className:"box",style:{minHeight:"100vh"}},React.createElement("h1",{className:"title"},"My Novels:"),React.createElement("hr",null),React.createElement("div",{id:"novel-cards",className:"is-flex",style:{gap:10}}))),o=e=>{const t=a.from(e.novel.cover.data,"base64").toString("base64"),n=`data:${e.novel.coverMime};base64,${t}`;return React.createElement("div",{style:{border:"ridge thin",width:200,height:360},onMouseEnter:t=>{const n=document.getElementById(`${e.novel.title}-title`);n.classList.add("is-size-4"),n.classList.remove("is-size-5"),t.currentTarget.style.width=250,t.currentTarget.style.height=450},onMouseLeave:t=>{const n=document.getElementById(`${e.novel.title}-title`);n.classList.add("is-size-5"),n.classList.remove("is-size-4"),t.currentTarget.style.width=200,t.currentTarget.style.height=360},onClick:t=>{console.log(`Card clicked: ${t.currentTarget}`),window.localStorage.setItem("partchment-editorNovelID",e.novel._id),window.location.assign("/editNovel")}},React.createElement("div",{className:"card"},React.createElement("div",{className:"card-image"},React.createElement("figure",{className:"image is-2by3"},React.createElement("img",{id:`${e.novel.title}-img`,src:n,alt:"Placeholder image"})))),React.createElement("h1",{id:`${e.novel.title}-title`,className:"is-size-5 has-text-centered has-text-grey",style:{overflow:"hidden"}},e.novel.title))},s=e=>React.createElement("div",{className:"card",style:{width:200},onMouseEnter:e=>{e.currentTarget.style.width=250},onMouseLeave:e=>{e.currentTarget.style.width=200},onClick:t=>{l(e)}},React.createElement("div",{className:"card-image"},React.createElement("figure",{className:"image is-2by3"},React.createElement("img",{src:"/assets/img/AddCard.png",alt:"Placeholder image"})))),c=async e=>{const t=await fetch("/getLoggedInAs"),n=(await t.json()).username;ReactDOM.render(React.createElement(i,{csrf:e}),document.getElementById("create-content")),r.sendPost("/searchNovelsByUser",{user:n,_csrf:e},(t=>{console.log(t),novels=t.novels,novels.forEach((t=>{const n=t.title.toLowerCase().replace(" ","_"),r=document.createElement("div");r.id=n,document.getElementById("novel-cards").appendChild(r),ReactDOM.render(React.createElement(o,{csrf:e,novel:t}),document.getElementById(n))}));const n="empty-card",r=document.createElement("div");r.id=n,document.getElementById("novel-cards").appendChild(r),ReactDOM.render(React.createElement(s,{csrf:e}),document.getElementById(n))}))},l=e=>{const t=e=>React.createElement("div",null,React.createElement("div",{style:{height:20}}),React.createElement("div",{className:"columns",style:{height:65,width:"100vw",border:"thin ridge"}},React.createElement("div",{className:"column is-offset-0"},React.createElement("a",{className:"button is-white",onClick:()=>{c(e.csrf)}},React.createElement("i",{className:"fa-solid fa-arrow-left",style:{padding:"0 10 0 0"}}),"Back"))),React.createElement("div",{style:{height:10}}),React.createElement("form",{id:"createNovelForm",name:"createNovelForm",onSubmit:handleCreateNovel,action:"/createNovel",method:"POST",className:"mainForm box"},React.createElement("div",{className:"title"},React.createElement("h1",null,"Create A New Novel!")),React.createElement("div",{className:"field"},React.createElement("label",{className:"label",htmlFor:"title"},"Title: "),React.createElement("div",{className:"control has-icons-left"},React.createElement("input",{className:"input",id:"title",type:"text",name:"title",placeholder:"Title"}),React.createElement("span",{className:"icon is-small is-left"},React.createElement("i",{className:"fa-solid fa-book"})))),React.createElement("div",{className:"field"},React.createElement("label",{className:"label"},"Book Cover: "),React.createElement("div",{className:""},React.createElement("div",{className:"file is-boxed has-name is-info"},React.createElement("label",{className:"file-label"},React.createElement("input",{className:"file-input",id:"cover",type:"file",name:"cover",onChange:async e=>{const t=e.currentTarget.files[0];if(!t)return;const n=new FileReader;n.addEventListener("load",(()=>{const e=n.result;document.querySelector("#coverPreview").src=e,document.querySelector("#fileName").innerHTML=t.name})),n.readAsDataURL(t)}}),React.createElement("span",{className:"file-cta"},React.createElement("span",{className:"file-icon"},React.createElement("i",{className:"fas fa-upload"})),React.createElement("span",{className:"file-label"},"Choose a fileâ€¦")),React.createElement("span",{id:"fileName",className:"file-name"},"Use a 2:3 aspect ratio"))),React.createElement("div",{className:"",style:{width:200}},React.createElement("figure",{className:"image is-2by3"},React.createElement("img",{id:"coverPreview",src:"/assets/img/1080x1920.png",alt:"Placeholder image"}))))),React.createElement("input",{id:"_csrf",type:"hidden",name:"_csrf",value:e.csrf}),React.createElement("span",{id:"create-novel-error-span",className:"has-text-danger"}),React.createElement("div",{className:"control is-pulled-right"},React.createElement("input",{className:"formSubmit button is-link",type:"submit",value:"Create"}))));ReactDOM.render(React.createElement(t,{csrf:e.csrf}),document.getElementById("create-content"))};handleCreateNovel=e=>{e.preventDefault();const t=document.getElementById("title").value,n=document.getElementById("cover"),a=document.getElementById("create-novel-error-span"),i=e.target.querySelector("#_csrf").value;if(!t)return void(a.innerHTML="Title is required!");const o=n.files[0];if(!o||void 0===o)return void(a.innerHTML="Cover is required!");const s={_csrf:i,formData:new FormData(document.querySelector("#createNovelForm"))};r.sendMultipartPost("/createNovel",s,u)};const u=e=>{c(e.csrfToken)};e.exports={init:async()=>{const e=await fetch("/getToken"),t=await e.json();c(t.csrfToken)}}},986:(e,t,n)=>{const r=n(603),a=(n(764).lW,e=>(console.log(e),React.createElement("div",null,React.createElement("div",{className:"",style:{height:65,width:"100vw",margin:"auto",border:"thin ridge",display:"flex",flexFlow:"row",justifyContent:"space-between",alignItems:"center",paddingRight:"30px"}},React.createElement("div",{className:""},React.createElement("a",{className:"button is-white",href:"/editNovel"},React.createElement("i",{className:"fa-solid fa-arrow-left",style:{padding:"0 10 0 0"}}),"Back")),React.createElement("div",{className:""},React.createElement("a",{className:"button is-primary",onClick:e=>{}},React.createElement("i",{className:"fa-solid fa-check",style:{padding:"0 10 0 0"}}),"Publish"))),React.createElement("div",{style:{height:20}}),React.createElement("div",{style:{display:"flex",justifyContent:"center"}},React.createElement("textarea",{name:"textArea",rows:15,cols:100,style:{padding:"3%",borderColor:"#957dad",borderWidth:"thick"}})))));e.exports={init:async()=>{const e=await fetch("/getToken"),t=await e.json();console.log("init editChapter"),console.log(t);const n=localStorage.getItem("partchment-editorChapterID");if(!n)return console.log("No Chapter Selected"),void window.location.assign("/create");r.sendPost("/searchChapterByID",{chapterID:n,_csrf:t.csrfToken},(e=>{ReactDOM.render(React.createElement(a,{csrf:t.csrfToken,chapter:e.chapter}),document.getElementById("edit-chapter-content"))}))}}},401:(e,t,n)=>{const r=n(603),a=n(764).lW,i=e=>{console.log(e);let t=e.novel,n="False";t.published&&(n="True");const i=a.from(t.cover.data,"base64").toString("base64"),c=`data:${t.coverMime};base64,${i}`,l=new Date(t.createdDate).toLocaleDateString(void 0,{weekday:"long",year:"numeric",month:"long",day:"numeric"}),u=e=>{const n=e.currentTarget.getAttribute("data-modal-type"),r=document.getElementById("modal-textarea"),a=document.getElementById("modal"),i=document.getElementById("modal-save-button"),o=document.getElementById("modal-title");switch(n){case"abstract":r.value=t.abstract,r.rows="15",i.removeEventListener("click",d),i.addEventListener("click",m),o.innerHTML="Abstract";break;case"title":r.value=t.title,r.rows="1",i.removeEventListener("click",m),i.addEventListener("click",d),o.innerHTML="Title"}a.classList.add("is-active")},f=()=>{document.getElementById("modal").classList.remove("is-active")},d=n=>{const a=document.getElementById("modal-textarea"),i=document.getElementById("novel-title");console.log("Update title"),f();const o=document.createElement("span");o.classList="bulma-loader-mixin",i.appendChild(o),r.sendPost("/editNovel",{novelID:t._id,title:a.value,_csrf:e.csrf},(e=>{e.error&&console.log(e.error),t.title=e.updatedNovel.title,i.innerHTML=t.title}))},m=n=>{const a=document.getElementById("modal-textarea"),i=document.getElementById("abstract-text");f();const o=document.createElement("span");o.classList="bulma-loader-mixin",i.appendChild(o),r.sendPost("/editNovel",{novelID:t._id,abstract:a.value,_csrf:e.csrf},(e=>{e.error&&console.log(e.error),t.abstract=e.updatedNovel.abstract,i.innerHTML=t.abstract}))};return React.createElement("div",null,React.createElement("div",{id:"modal",className:"modal"},React.createElement("div",{className:"modal-background",onClick:e=>{(document.querySelectorAll(".modal")||[]).forEach((e=>{e.classList.remove("is-active")}))}}),React.createElement("div",{className:"modal-card"},React.createElement("header",{className:"modal-card-head"},React.createElement("p",{id:"modal-title",className:"modal-card-title"}),React.createElement("button",{className:"delete","aria-label":"close",onClick:f})),React.createElement("section",{className:"modal-card-body"},React.createElement("textarea",{id:"modal-textarea",className:"textarea has-fixed-size",placeholder:"Add a description...",rows:"10"})),React.createElement("footer",{className:"modal-card-foot"},React.createElement("button",{id:"modal-save-button",className:"button is-success"},"Save changes"),React.createElement("button",{className:"button",onClick:f},"Cancel")))),React.createElement("div",{className:"box",style:{minHeight:"80vh",width:"100vw",margin:"auto",padding:0}},React.createElement("div",{className:"",style:{height:65,width:"100vw",margin:"auto",border:"thin ridge",display:"flex",flexFlow:"row",justifyContent:"space-between",alignItems:"center",paddingRight:"30px"}},React.createElement("div",{className:""},React.createElement("a",{className:"button is-white",href:"/create"},React.createElement("i",{className:"fa-solid fa-arrow-left",style:{padding:"0 10 0 0"}}),"Back")),React.createElement("div",{className:""},React.createElement("button",{className:"button is-link",onClick:n=>{r.sendPost("/createChapter",{novelID:t._id,_csrf:e.csrf},(e=>{console.log(e),window.localStorage.setItem("partchment-editorChapterID",e.createdChapter._id),window.location.assign("/editChapter")}))}},React.createElement("i",{className:"fa-solid fa-plus",style:{padding:"0 10 0 0"}})," Create Chapter"))),React.createElement("div",{style:{height:20}}),React.createElement("div",{className:"columns",style:{width:"95vw",margin:"auto"}},React.createElement("div",{className:"column",style:{maxWidth:"300px",margin:"auto"}},React.createElement("figure",{className:"image is-2by3"},React.createElement("img",{id:`${t.title}-img`,src:c,alt:"Placeholder image"}))),React.createElement("div",{className:"column is-three-quarters",style:{height:"34.35vw",minHeight:"250px",display:"flex",flexFlow:"column"}},React.createElement("span",{style:{width:"100%",display:"flex",alignItems:"center"}},React.createElement("h1",{id:"novel-title",className:"title",style:{margin:0,paddingRight:"10px"}},t.title),React.createElement("a",{onClick:u,"data-modal-type":"title"},React.createElement("i",{className:"fa-solid fa-pencil"}))),React.createElement("h2",{className:"subtitle"},"By: ",t.author),React.createElement("span",{style:{width:"100%",display:"flex",alignItems:"center"}},React.createElement("h2",{className:"subtitle",style:{margin:0,paddingRight:"10px"}},"Abstract"),React.createElement("a",{onClick:u,"data-modal-type":"abstract"},React.createElement("i",{className:"fa-solid fa-pencil"}))),React.createElement("div",{id:"abstract-text",style:{height:"100%",width:"100%",minHeight:"100px"}},t.abstract))),React.createElement("div",{className:"box"},React.createElement("ul",null,React.createElement("li",null,"Published Chapters: ",t.publishedChapterCount),React.createElement("li",null,"Unpublished Chapters: ",t.totalChapterCount-t.publishedChapterCount),React.createElement("li",null,"Created Date: ",l),React.createElement("li",null,"Published: ",n),React.createElement("li",null,"Publication Date: ",t.published))),React.createElement("hr",null),React.createElement("div",null,React.createElement("a",{id:"chapters-button",className:"button is-link",onClick:()=>{const t=document.getElementById("chapters-button"),n=document.getElementById("drafts-button"),r=document.getElementById("chapter-title");t.classList.add("is-link"),n.classList.remove("is-link"),r.innerHTML="Chapters",o(e.chapters)}},"Chapters"),React.createElement("a",{id:"drafts-button",className:"button",onClick:()=>{const t=document.getElementById("chapters-button"),n=document.getElementById("drafts-button"),r=document.getElementById("chapter-title");t.classList.remove("is-link"),n.classList.add("is-link"),r.innerHTML="Drafts",s(e.chapters)},style:{marginLeft:10}},"Drafts"),React.createElement("h1",{id:"chapter-title",className:"title"},"Chapters"),React.createElement("div",{id:"chapters-div"},React.createElement("table",{id:"chapters-table",className:"table is-hoverable",style:{width:"100%"}},React.createElement("thead",null,React.createElement("tr",null,React.createElement("th",{style:{padding:0,paddingLeft:10,width:50}},React.createElement("abbr",{title:"Chapter"},"Chapter")),React.createElement("th",{style:{padding:0,width:100}},React.createElement("abbr",{title:"Name"},"Name")),React.createElement("th",{style:{padding:0,width:50}},React.createElement("abbr",{title:"Views"},"Views")),React.createElement("th",{style:{padding:0,width:50}}," ",React.createElement("abbr",{title:"Delete"},"Delete")))),React.createElement("tbody",{id:"chapters-table-body"}))))))},o=async e=>{const t=document.getElementById("chapters-table-body"),n=document.getElementById("chapters-table");if(t.innerHTML="",Object.keys(e).forEach((n=>{if(n.includes("chapter")){const r=document.createElement("tr"),a=document.createElement("th"),i=document.createElement("td"),o=document.createElement("td"),s=document.createElement("td");console.log(`chapter ${n}`),console.log(e),r.style.width="100%",r.addEventListener("click",(()=>{window.localStorage.setItem("partchment-editorChapterID",e[n]._id),window.location.assign("/editChapter")})),a.innerHTML=n,i.innerHTML=e[n].title,o.innerHTML=e[n].views;const c=document.createElement("a"),l=document.createElement("i");l.classList="fa-solid fa-x",c.appendChild(l),s.appendChild(c),r.appendChild(a),r.appendChild(i),r.appendChild(o),r.appendChild(s),t.appendChild(r)}})),console.log(n),n.rows.length-1==0){const e=document.createElement("tr"),n=document.createElement("th");n.innerHTML="No published Chapters",e.appendChild(n),t.appendChild(e)}},s=async e=>{const t=document.getElementById("chapters-table-body");t.innerHTML="",Object.keys(e).forEach((n=>{if(n.includes("draft")){const r=document.createElement("tr"),a=document.createElement("th"),i=document.createElement("td"),o=document.createElement("td"),s=document.createElement("td");console.log(`chapter ${n}`),console.log(e),r.style.width="100%",r.addEventListener("click",(()=>{window.localStorage.setItem("partchment-editorChapterID",e[n]._id),window.location.assign("/editChapter")})),a.innerHTML=n,i.innerHTML=e[n].title,o.innerHTML=e[n].views;const c=document.createElement("a"),l=document.createElement("i");l.classList="fa-solid fa-x",c.appendChild(l),s.appendChild(c),r.appendChild(a),r.appendChild(i),r.appendChild(o),r.appendChild(s),t.appendChild(r)}}))};e.exports={init:async()=>{const e=await fetch("/getToken"),t=await e.json();console.log("init editNovel"),console.log(t);const n=localStorage.getItem("partchment-editorNovelID");if(!n)return console.log("No Novel Selected"),void window.location.assign("/create");r.sendPost("/searchNovelByID",{novelID:n,_csrf:t.csrfToken},(async e=>{await(async(n,a,s)=>{console.log(n);const c=n.chapters;console.log(c);const l={};return Object.keys(c).forEach((e=>{r.sendPost("/searchChapterByID",{chapterID:c[e],_csrf:a},(t=>{console.log("response"),console.log(t),l[e]=t.chapter}))})),(n=>{ReactDOM.render(React.createElement(i,{csrf:t.csrfToken,novel:e.novel,chapters:n}),document.getElementById("edit-novel-content")),o(n)})(l),l})(e.novel,t.csrfToken)}))}}},603:e=>{const t=(e,t,n)=>{e.error&&console.log(e.error),e.redirect&&(window.location=e.redirect),n&&(e.csrfToken=t._csrf,n(e))};e.exports={sendPost:async(e,n,r)=>{if(!n._csrf)return void console.log("Missing CSRF Token, request not sent");const a=await fetch(e,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(n)}),i=await a.json();t(i,n,r)},sendMultipartPost:async(e,n,r)=>{const a=await fetch(e,{method:"POST",body:n.formData}),i=await a.json();t(i,n,r)}}},984:e=>{e.exports={init:async()=>{const e=await fetch("/getToken");await e.json()}}},911:e=>{e.exports={init:async()=>{const e=await fetch("/getToken");await e.json()}}},316:(e,t,n)=>{const r=n(603),a=e=>{e.preventDefault();const t=e.target.querySelector("#user").value,n=e.target.querySelector("#pass").value,a=e.target.querySelector("#_csrf").value;return t&&n?(r.sendPost(e.target.action,{username:t,pass:n,_csrf:a}),!1):(e.target.querySelector("#login-error-span").innerHTML="Username or password is empty!",!1)},i=e=>{e.preventDefault();const t=e.target.querySelector("#user").value,n=e.target.querySelector("#pass").value,a=e.target.querySelector("#pass2").value,i=e.target.querySelector("#_csrf").value;return t&&n&&a?n!==a?(e.target.querySelector("#signup-error-span").innerHTML="Passwords do not match!",!1):(r.sendPost(e.target.action,{username:t,pass:n,pass2:a,_csrf:i}),!1):(e.target.querySelector("#signup-error-span").innerHTML="Username or password is empty!",!1)},o=e=>(console.log("login window"),console.log(e),React.createElement("form",{id:"loginForm",name:"loginForm",onSubmit:a,action:"/login",method:"POST",className:"mainForm box"},React.createElement("div",{className:"title"},React.createElement("h1",null,"Login")),React.createElement("div",{className:"field"},React.createElement("label",{className:"label",htmlFor:"username"},"Username: "),React.createElement("div",{className:"control has-icons-left"},React.createElement("input",{className:"input",id:"user",type:"text",name:"username",placeholder:"Username"}),React.createElement("span",{className:"icon is-small is-left"},React.createElement("i",{className:"fas fa-user"})))),React.createElement("div",{className:"field"},React.createElement("label",{className:"label",htmlFor:"pass"},"Password: "),React.createElement("div",{className:"control has-icons-left"},React.createElement("input",{className:"input",id:"pass",type:"password",name:"pass",placeholder:"Password"}),React.createElement("span",{className:"icon is-small is-left"},React.createElement("i",{className:"fa-solid fa-lock"})))),React.createElement("input",{id:"_csrf",type:"hidden",name:"_csrf",value:e.csrf}),React.createElement("span",{id:"login-error-span",className:"has-text-danger"}),React.createElement("div",{className:"control is-pulled-right"},React.createElement("input",{className:"formSubmit button is-link",type:"submit",value:"Sign in"})))),s=e=>(authenticateUsername=async t=>{const n=t.currentTarget;console.log("signup window - authenitcate username"),console.log(e),await r.sendPost("/isUsernameAvailable",{username:t.currentTarget.value,_csrf:e.csrf},(e=>{let t=n.parentElement,r=t.querySelector("#username-success-icon"),a=t.parentElement.querySelector("#isAvailable");e.found?(r.innerHTML='<i class="fa-solid fa-exclamation"></i>',a.innerHTML="This username is taken",a.classList="help is-danger"):(r.innerHTML='<i class="fas fa-check"></i>',a.innerHTML="This username is available",a.classList="help is-success")}))},React.createElement("form",{id:"signupForm",name:"signupForm",onSubmit:i,action:"/signup",method:"POST",className:"mainForm box"},React.createElement("div",{className:"title"},React.createElement("h1",null,"Sign Up")),React.createElement("div",{className:"field"},React.createElement("label",{className:"label",htmlFor:"username"},"Username: "),React.createElement("div",{className:"control has-icons-left has-icons-right"},React.createElement("input",{className:"input",id:"user",type:"text",name:"username",placeholder:"Username",onChange:authenticateUsername}),React.createElement("span",{className:"icon is-small is-left"},React.createElement("i",{className:"fas fa-user"})),React.createElement("span",{id:"username-success-icon",className:"icon is-small is-right"})),React.createElement("p",{id:"isAvailable",className:"help is-success"})),React.createElement("div",{className:"field"},React.createElement("label",{className:"label",htmlFor:"pass"},"Password: "),React.createElement("div",{className:"control has-icons-left"},React.createElement("input",{className:"input",id:"pass",type:"password",name:"pass",placeholder:"Password"}),React.createElement("span",{className:"icon is-small is-left"},React.createElement("i",{className:"fa-solid fa-lock"})))),React.createElement("div",{className:"field"},React.createElement("label",{className:"label",htmlFor:"pass2"},"Password: "),React.createElement("div",{className:"control has-icons-left"},React.createElement("input",{className:"input",id:"pass2",type:"password",name:"pass",placeholder:"Retype Password"}),React.createElement("span",{className:"icon is-small is-left"},React.createElement("i",{className:"fa-solid fa-lock"})))),React.createElement("input",{id:"_csrf",type:"hidden",name:"_csrf",value:e.csrf}),React.createElement("span",{id:"signup-error-span",className:"has-text-danger"}),React.createElement("div",{className:"control is-pulled-right"},React.createElement("input",{className:"formSubmit button is-link",type:"submit",value:"Sign Up"}))));e.exports={init:async()=>{const e=await fetch("/getToken"),t=await e.json();console.log("init login"),console.log(t),ReactDOM.render(React.createElement(o,{csrf:t.csrfToken}),document.getElementById("login-content"))},renderLoginWindow:async e=>{ReactDOM.render(React.createElement(o,{csrf:e.csrf}),document.getElementById("login-content"))},renderSignUpWindow:async e=>{console.log("render signup window"),console.log(e),console.log(e._csrf),ReactDOM.render(React.createElement(s,{csrf:e._csrf}),document.getElementById("login-content"))}}},856:e=>{const t=()=>{const e=document.querySelector("header").getAttribute("data-current-page");Array.from(document.querySelector(".navbar-start").children).concat(Array.from(document.querySelector(".navbar-end").children)).forEach((t=>{if(t.id===e)if("login"===e){const e=document.querySelector("#login"),t=document.querySelector("#signup");document.querySelector("#loginForm")?(e.classList="navbar-item is-tab is-active",t.classList="navbar-item is-tab"):(e.classList="navbar-item is-tab",t.classList="navbar-item is-tab is-active")}else t.classList="navbar-item is-tab is-active";else"signup"===t.id||(t.classList="navbar-item is-tab")}))};e.exports={Navbar:()=>React.createElement("nav",{className:"navbar is-dark has-shadow"},React.createElement("div",{className:"navbar-brand"},React.createElement("a",{className:"navbar-item",href:"/"},React.createElement("i",{className:"fa-solid fa-scroll"})),React.createElement("a",{className:"navbar-burger",id:"burger",onClick:e=>{e.preventDefault();try{let t=e.currentTarget.parentElement.parentElement.querySelector("#nav-links");e.currentTarget.classList.toggle("is-active"),t.classList.toggle("is-active")}catch(e){console.log(e)}}},React.createElement("span",null),React.createElement("span",null),React.createElement("span",null))),React.createElement("div",{className:"navbar-menu",id:"nav-links"},React.createElement("div",{className:"navbar-start"},React.createElement("a",{id:"home",className:"navbar-item is-tab",href:"/home"},"Home"),React.createElement("a",{id:"create",className:"navbar-item is-tab",href:"/create"},"Create"),React.createElement("a",{id:"library",className:"navbar-item is-tab",href:"/library"},"Library")),React.createElement("div",{className:"navbar-end"},React.createElement("a",{id:"login",className:"navbar-item is-tab",onClick:t},"Login"),React.createElement("a",{id:"signup",className:"navbar-item is-tab",onClick:t},"Sign Up"),React.createElement("a",{id:"signout",className:"navbar-item is-tab"},"Sign Out"),React.createElement("a",{id:"profile",className:"navbar-item is-tab",href:"/profile"},React.createElement("i",{className:"fa-solid fa-user"}))))),initializeNavbar:async(e,n)=>{let r=await fetch("/isLoggedIn"),a=await r.json();t();let i=document.getElementById("signout"),o=document.getElementById("profile"),s=document.getElementById("signup"),c=document.getElementById("login");if(a.loggedIn)i.style.display="flex",o.style.display="flex",s.style.display="none",c.style.display="none",i.addEventListener("click",(async e=>{e.preventDefault();let t=await fetch("/logout");window.localStorage.setItem("partchment-LoadSignUp",!1),window.location.assign(t.url)}));else{i.style.display="none",o.style.display="none",s.style.display="flex",c.style.display="flex";let t=!1;null!=document.getElementById("login-content")&&(t=!0),c.addEventListener("click",(async r=>{if(r.preventDefault(),t)return await e.renderLoginWindow({_csrf:n}),!1;{let e=await fetch("/login");return window.localStorage.setItem("partchment-LoadSignUp",!1),window.location.assign(e.url),!1}})),s.addEventListener("click",(async r=>{if(r.preventDefault(),t)return await e.renderSignUpWindow({_csrf:n}),!1;{let e=await fetch("/login");return window.localStorage.setItem("partchment-LoadSignUp",!0),window.location.assign(e.url),!1}}))}},updateSelectedPage:t}},333:e=>{e.exports={init:async()=>{const e=await fetch("/getToken");await e.json()}}},742:(e,t)=>{"use strict";t.byteLength=function(e){var t=c(e),n=t[0],r=t[1];return 3*(n+r)/4-r},t.toByteArray=function(e){var t,n,i=c(e),o=i[0],s=i[1],l=new a(function(e,t,n){return 3*(t+n)/4-n}(0,o,s)),u=0,f=s>0?o-4:o;for(n=0;n<f;n+=4)t=r[e.charCodeAt(n)]<<18|r[e.charCodeAt(n+1)]<<12|r[e.charCodeAt(n+2)]<<6|r[e.charCodeAt(n+3)],l[u++]=t>>16&255,l[u++]=t>>8&255,l[u++]=255&t;return 2===s&&(t=r[e.charCodeAt(n)]<<2|r[e.charCodeAt(n+1)]>>4,l[u++]=255&t),1===s&&(t=r[e.charCodeAt(n)]<<10|r[e.charCodeAt(n+1)]<<4|r[e.charCodeAt(n+2)]>>2,l[u++]=t>>8&255,l[u++]=255&t),l},t.fromByteArray=function(e){for(var t,r=e.length,a=r%3,i=[],o=16383,s=0,c=r-a;s<c;s+=o)i.push(l(e,s,s+o>c?c:s+o));return 1===a?(t=e[r-1],i.push(n[t>>2]+n[t<<4&63]+"==")):2===a&&(t=(e[r-2]<<8)+e[r-1],i.push(n[t>>10]+n[t>>4&63]+n[t<<2&63]+"=")),i.join("")};for(var n=[],r=[],a="undefined"!=typeof Uint8Array?Uint8Array:Array,i="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",o=0,s=i.length;o<s;++o)n[o]=i[o],r[i.charCodeAt(o)]=o;function c(e){var t=e.length;if(t%4>0)throw new Error("Invalid string. Length must be a multiple of 4");var n=e.indexOf("=");return-1===n&&(n=t),[n,n===t?0:4-n%4]}function l(e,t,r){for(var a,i,o=[],s=t;s<r;s+=3)a=(e[s]<<16&16711680)+(e[s+1]<<8&65280)+(255&e[s+2]),o.push(n[(i=a)>>18&63]+n[i>>12&63]+n[i>>6&63]+n[63&i]);return o.join("")}r["-".charCodeAt(0)]=62,r["_".charCodeAt(0)]=63},764:(e,t,n)=>{"use strict";const r=n(742),a=n(645),i="function"==typeof Symbol&&"function"==typeof Symbol.for?Symbol.for("nodejs.util.inspect.custom"):null;t.lW=c,t.h2=50;const o=2147483647;function s(e){if(e>o)throw new RangeError('The value "'+e+'" is invalid for option "size"');const t=new Uint8Array(e);return Object.setPrototypeOf(t,c.prototype),t}function c(e,t,n){if("number"==typeof e){if("string"==typeof t)throw new TypeError('The "string" argument must be of type string. Received type number');return f(e)}return l(e,t,n)}function l(e,t,n){if("string"==typeof e)return function(e,t){if("string"==typeof t&&""!==t||(t="utf8"),!c.isEncoding(t))throw new TypeError("Unknown encoding: "+t);const n=0|p(e,t);let r=s(n);const a=r.write(e,t);return a!==n&&(r=r.slice(0,a)),r}(e,t);if(ArrayBuffer.isView(e))return function(e){if(J(e,Uint8Array)){const t=new Uint8Array(e);return m(t.buffer,t.byteOffset,t.byteLength)}return d(e)}(e);if(null==e)throw new TypeError("The first argument must be one of type string, Buffer, ArrayBuffer, Array, or Array-like Object. Received type "+typeof e);if(J(e,ArrayBuffer)||e&&J(e.buffer,ArrayBuffer))return m(e,t,n);if("undefined"!=typeof SharedArrayBuffer&&(J(e,SharedArrayBuffer)||e&&J(e.buffer,SharedArrayBuffer)))return m(e,t,n);if("number"==typeof e)throw new TypeError('The "value" argument must not be of type number. Received type number');const r=e.valueOf&&e.valueOf();if(null!=r&&r!==e)return c.from(r,t,n);const a=function(e){if(c.isBuffer(e)){const t=0|h(e.length),n=s(t);return 0===n.length||e.copy(n,0,0,t),n}return void 0!==e.length?"number"!=typeof e.length||Z(e.length)?s(0):d(e):"Buffer"===e.type&&Array.isArray(e.data)?d(e.data):void 0}(e);if(a)return a;if("undefined"!=typeof Symbol&&null!=Symbol.toPrimitive&&"function"==typeof e[Symbol.toPrimitive])return c.from(e[Symbol.toPrimitive]("string"),t,n);throw new TypeError("The first argument must be one of type string, Buffer, ArrayBuffer, Array, or Array-like Object. Received type "+typeof e)}function u(e){if("number"!=typeof e)throw new TypeError('"size" argument must be of type number');if(e<0)throw new RangeError('The value "'+e+'" is invalid for option "size"')}function f(e){return u(e),s(e<0?0:0|h(e))}function d(e){const t=e.length<0?0:0|h(e.length),n=s(t);for(let r=0;r<t;r+=1)n[r]=255&e[r];return n}function m(e,t,n){if(t<0||e.byteLength<t)throw new RangeError('"offset" is outside of buffer bounds');if(e.byteLength<t+(n||0))throw new RangeError('"length" is outside of buffer bounds');let r;return r=void 0===t&&void 0===n?new Uint8Array(e):void 0===n?new Uint8Array(e,t):new Uint8Array(e,t,n),Object.setPrototypeOf(r,c.prototype),r}function h(e){if(e>=o)throw new RangeError("Attempt to allocate Buffer larger than maximum size: 0x"+o.toString(16)+" bytes");return 0|e}function p(e,t){if(c.isBuffer(e))return e.length;if(ArrayBuffer.isView(e)||J(e,ArrayBuffer))return e.byteLength;if("string"!=typeof e)throw new TypeError('The "string" argument must be one of type string, Buffer, or ArrayBuffer. Received type '+typeof e);const n=e.length,r=arguments.length>2&&!0===arguments[2];if(!r&&0===n)return 0;let a=!1;for(;;)switch(t){case"ascii":case"latin1":case"binary":return n;case"utf8":case"utf-8":return G(e).length;case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return 2*n;case"hex":return n>>>1;case"base64":return V(e).length;default:if(a)return r?-1:G(e).length;t=(""+t).toLowerCase(),a=!0}}function g(e,t,n){let r=!1;if((void 0===t||t<0)&&(t=0),t>this.length)return"";if((void 0===n||n>this.length)&&(n=this.length),n<=0)return"";if((n>>>=0)<=(t>>>=0))return"";for(e||(e="utf8");;)switch(e){case"hex":return U(this,t,n);case"utf8":case"utf-8":return L(this,t,n);case"ascii":return C(this,t,n);case"latin1":case"binary":return S(this,t,n);case"base64":return I(this,t,n);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return A(this,t,n);default:if(r)throw new TypeError("Unknown encoding: "+e);e=(e+"").toLowerCase(),r=!0}}function y(e,t,n){const r=e[t];e[t]=e[n],e[n]=r}function E(e,t,n,r,a){if(0===e.length)return-1;if("string"==typeof n?(r=n,n=0):n>2147483647?n=2147483647:n<-2147483648&&(n=-2147483648),Z(n=+n)&&(n=a?0:e.length-1),n<0&&(n=e.length+n),n>=e.length){if(a)return-1;n=e.length-1}else if(n<0){if(!a)return-1;n=0}if("string"==typeof t&&(t=c.from(t,r)),c.isBuffer(t))return 0===t.length?-1:w(e,t,n,r,a);if("number"==typeof t)return t&=255,"function"==typeof Uint8Array.prototype.indexOf?a?Uint8Array.prototype.indexOf.call(e,t,n):Uint8Array.prototype.lastIndexOf.call(e,t,n):w(e,[t],n,r,a);throw new TypeError("val must be string, number or Buffer")}function w(e,t,n,r,a){let i,o=1,s=e.length,c=t.length;if(void 0!==r&&("ucs2"===(r=String(r).toLowerCase())||"ucs-2"===r||"utf16le"===r||"utf-16le"===r)){if(e.length<2||t.length<2)return-1;o=2,s/=2,c/=2,n/=2}function l(e,t){return 1===o?e[t]:e.readUInt16BE(t*o)}if(a){let r=-1;for(i=n;i<s;i++)if(l(e,i)===l(t,-1===r?0:i-r)){if(-1===r&&(r=i),i-r+1===c)return r*o}else-1!==r&&(i-=i-r),r=-1}else for(n+c>s&&(n=s-c),i=n;i>=0;i--){let n=!0;for(let r=0;r<c;r++)if(l(e,i+r)!==l(t,r)){n=!1;break}if(n)return i}return-1}function b(e,t,n,r){n=Number(n)||0;const a=e.length-n;r?(r=Number(r))>a&&(r=a):r=a;const i=t.length;let o;for(r>i/2&&(r=i/2),o=0;o<r;++o){const r=parseInt(t.substr(2*o,2),16);if(Z(r))return o;e[n+o]=r}return o}function v(e,t,n,r){return Y(G(t,e.length-n),e,n,r)}function R(e,t,n,r){return Y(function(e){const t=[];for(let n=0;n<e.length;++n)t.push(255&e.charCodeAt(n));return t}(t),e,n,r)}function N(e,t,n,r){return Y(V(t),e,n,r)}function B(e,t,n,r){return Y(function(e,t){let n,r,a;const i=[];for(let o=0;o<e.length&&!((t-=2)<0);++o)n=e.charCodeAt(o),r=n>>8,a=n%256,i.push(a),i.push(r);return i}(t,e.length-n),e,n,r)}function I(e,t,n){return 0===t&&n===e.length?r.fromByteArray(e):r.fromByteArray(e.slice(t,n))}function L(e,t,n){n=Math.min(e.length,n);const r=[];let a=t;for(;a<n;){const t=e[a];let i=null,o=t>239?4:t>223?3:t>191?2:1;if(a+o<=n){let n,r,s,c;switch(o){case 1:t<128&&(i=t);break;case 2:n=e[a+1],128==(192&n)&&(c=(31&t)<<6|63&n,c>127&&(i=c));break;case 3:n=e[a+1],r=e[a+2],128==(192&n)&&128==(192&r)&&(c=(15&t)<<12|(63&n)<<6|63&r,c>2047&&(c<55296||c>57343)&&(i=c));break;case 4:n=e[a+1],r=e[a+2],s=e[a+3],128==(192&n)&&128==(192&r)&&128==(192&s)&&(c=(15&t)<<18|(63&n)<<12|(63&r)<<6|63&s,c>65535&&c<1114112&&(i=c))}}null===i?(i=65533,o=1):i>65535&&(i-=65536,r.push(i>>>10&1023|55296),i=56320|1023&i),r.push(i),a+=o}return function(e){const t=e.length;if(t<=T)return String.fromCharCode.apply(String,e);let n="",r=0;for(;r<t;)n+=String.fromCharCode.apply(String,e.slice(r,r+=T));return n}(r)}c.TYPED_ARRAY_SUPPORT=function(){try{const e=new Uint8Array(1),t={foo:function(){return 42}};return Object.setPrototypeOf(t,Uint8Array.prototype),Object.setPrototypeOf(e,t),42===e.foo()}catch(e){return!1}}(),c.TYPED_ARRAY_SUPPORT||"undefined"==typeof console||"function"!=typeof console.error||console.error("This browser lacks typed array (Uint8Array) support which is required by `buffer` v5.x. Use `buffer` v4.x if you require old browser support."),Object.defineProperty(c.prototype,"parent",{enumerable:!0,get:function(){if(c.isBuffer(this))return this.buffer}}),Object.defineProperty(c.prototype,"offset",{enumerable:!0,get:function(){if(c.isBuffer(this))return this.byteOffset}}),c.poolSize=8192,c.from=function(e,t,n){return l(e,t,n)},Object.setPrototypeOf(c.prototype,Uint8Array.prototype),Object.setPrototypeOf(c,Uint8Array),c.alloc=function(e,t,n){return function(e,t,n){return u(e),e<=0?s(e):void 0!==t?"string"==typeof n?s(e).fill(t,n):s(e).fill(t):s(e)}(e,t,n)},c.allocUnsafe=function(e){return f(e)},c.allocUnsafeSlow=function(e){return f(e)},c.isBuffer=function(e){return null!=e&&!0===e._isBuffer&&e!==c.prototype},c.compare=function(e,t){if(J(e,Uint8Array)&&(e=c.from(e,e.offset,e.byteLength)),J(t,Uint8Array)&&(t=c.from(t,t.offset,t.byteLength)),!c.isBuffer(e)||!c.isBuffer(t))throw new TypeError('The "buf1", "buf2" arguments must be one of type Buffer or Uint8Array');if(e===t)return 0;let n=e.length,r=t.length;for(let a=0,i=Math.min(n,r);a<i;++a)if(e[a]!==t[a]){n=e[a],r=t[a];break}return n<r?-1:r<n?1:0},c.isEncoding=function(e){switch(String(e).toLowerCase()){case"hex":case"utf8":case"utf-8":case"ascii":case"latin1":case"binary":case"base64":case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return!0;default:return!1}},c.concat=function(e,t){if(!Array.isArray(e))throw new TypeError('"list" argument must be an Array of Buffers');if(0===e.length)return c.alloc(0);let n;if(void 0===t)for(t=0,n=0;n<e.length;++n)t+=e[n].length;const r=c.allocUnsafe(t);let a=0;for(n=0;n<e.length;++n){let t=e[n];if(J(t,Uint8Array))a+t.length>r.length?(c.isBuffer(t)||(t=c.from(t)),t.copy(r,a)):Uint8Array.prototype.set.call(r,t,a);else{if(!c.isBuffer(t))throw new TypeError('"list" argument must be an Array of Buffers');t.copy(r,a)}a+=t.length}return r},c.byteLength=p,c.prototype._isBuffer=!0,c.prototype.swap16=function(){const e=this.length;if(e%2!=0)throw new RangeError("Buffer size must be a multiple of 16-bits");for(let t=0;t<e;t+=2)y(this,t,t+1);return this},c.prototype.swap32=function(){const e=this.length;if(e%4!=0)throw new RangeError("Buffer size must be a multiple of 32-bits");for(let t=0;t<e;t+=4)y(this,t,t+3),y(this,t+1,t+2);return this},c.prototype.swap64=function(){const e=this.length;if(e%8!=0)throw new RangeError("Buffer size must be a multiple of 64-bits");for(let t=0;t<e;t+=8)y(this,t,t+7),y(this,t+1,t+6),y(this,t+2,t+5),y(this,t+3,t+4);return this},c.prototype.toString=function(){const e=this.length;return 0===e?"":0===arguments.length?L(this,0,e):g.apply(this,arguments)},c.prototype.toLocaleString=c.prototype.toString,c.prototype.equals=function(e){if(!c.isBuffer(e))throw new TypeError("Argument must be a Buffer");return this===e||0===c.compare(this,e)},c.prototype.inspect=function(){let e="";const n=t.h2;return e=this.toString("hex",0,n).replace(/(.{2})/g,"$1 ").trim(),this.length>n&&(e+=" ... "),"<Buffer "+e+">"},i&&(c.prototype[i]=c.prototype.inspect),c.prototype.compare=function(e,t,n,r,a){if(J(e,Uint8Array)&&(e=c.from(e,e.offset,e.byteLength)),!c.isBuffer(e))throw new TypeError('The "target" argument must be one of type Buffer or Uint8Array. Received type '+typeof e);if(void 0===t&&(t=0),void 0===n&&(n=e?e.length:0),void 0===r&&(r=0),void 0===a&&(a=this.length),t<0||n>e.length||r<0||a>this.length)throw new RangeError("out of range index");if(r>=a&&t>=n)return 0;if(r>=a)return-1;if(t>=n)return 1;if(this===e)return 0;let i=(a>>>=0)-(r>>>=0),o=(n>>>=0)-(t>>>=0);const s=Math.min(i,o),l=this.slice(r,a),u=e.slice(t,n);for(let e=0;e<s;++e)if(l[e]!==u[e]){i=l[e],o=u[e];break}return i<o?-1:o<i?1:0},c.prototype.includes=function(e,t,n){return-1!==this.indexOf(e,t,n)},c.prototype.indexOf=function(e,t,n){return E(this,e,t,n,!0)},c.prototype.lastIndexOf=function(e,t,n){return E(this,e,t,n,!1)},c.prototype.write=function(e,t,n,r){if(void 0===t)r="utf8",n=this.length,t=0;else if(void 0===n&&"string"==typeof t)r=t,n=this.length,t=0;else{if(!isFinite(t))throw new Error("Buffer.write(string, encoding, offset[, length]) is no longer supported");t>>>=0,isFinite(n)?(n>>>=0,void 0===r&&(r="utf8")):(r=n,n=void 0)}const a=this.length-t;if((void 0===n||n>a)&&(n=a),e.length>0&&(n<0||t<0)||t>this.length)throw new RangeError("Attempt to write outside buffer bounds");r||(r="utf8");let i=!1;for(;;)switch(r){case"hex":return b(this,e,t,n);case"utf8":case"utf-8":return v(this,e,t,n);case"ascii":case"latin1":case"binary":return R(this,e,t,n);case"base64":return N(this,e,t,n);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return B(this,e,t,n);default:if(i)throw new TypeError("Unknown encoding: "+r);r=(""+r).toLowerCase(),i=!0}},c.prototype.toJSON=function(){return{type:"Buffer",data:Array.prototype.slice.call(this._arr||this,0)}};const T=4096;function C(e,t,n){let r="";n=Math.min(e.length,n);for(let a=t;a<n;++a)r+=String.fromCharCode(127&e[a]);return r}function S(e,t,n){let r="";n=Math.min(e.length,n);for(let a=t;a<n;++a)r+=String.fromCharCode(e[a]);return r}function U(e,t,n){const r=e.length;(!t||t<0)&&(t=0),(!n||n<0||n>r)&&(n=r);let a="";for(let r=t;r<n;++r)a+=K[e[r]];return a}function A(e,t,n){const r=e.slice(t,n);let a="";for(let e=0;e<r.length-1;e+=2)a+=String.fromCharCode(r[e]+256*r[e+1]);return a}function k(e,t,n){if(e%1!=0||e<0)throw new RangeError("offset is not uint");if(e+t>n)throw new RangeError("Trying to access beyond buffer length")}function x(e,t,n,r,a,i){if(!c.isBuffer(e))throw new TypeError('"buffer" argument must be a Buffer instance');if(t>a||t<i)throw new RangeError('"value" argument is out of bounds');if(n+r>e.length)throw new RangeError("Index out of range")}function M(e,t,n,r,a){q(t,r,a,e,n,7);let i=Number(t&BigInt(4294967295));e[n++]=i,i>>=8,e[n++]=i,i>>=8,e[n++]=i,i>>=8,e[n++]=i;let o=Number(t>>BigInt(32)&BigInt(4294967295));return e[n++]=o,o>>=8,e[n++]=o,o>>=8,e[n++]=o,o>>=8,e[n++]=o,n}function _(e,t,n,r,a){q(t,r,a,e,n,7);let i=Number(t&BigInt(4294967295));e[n+7]=i,i>>=8,e[n+6]=i,i>>=8,e[n+5]=i,i>>=8,e[n+4]=i;let o=Number(t>>BigInt(32)&BigInt(4294967295));return e[n+3]=o,o>>=8,e[n+2]=o,o>>=8,e[n+1]=o,o>>=8,e[n]=o,n+8}function O(e,t,n,r,a,i){if(n+r>e.length)throw new RangeError("Index out of range");if(n<0)throw new RangeError("Index out of range")}function P(e,t,n,r,i){return t=+t,n>>>=0,i||O(e,0,n,4),a.write(e,t,n,r,23,4),n+4}function D(e,t,n,r,i){return t=+t,n>>>=0,i||O(e,0,n,8),a.write(e,t,n,r,52,8),n+8}c.prototype.slice=function(e,t){const n=this.length;(e=~~e)<0?(e+=n)<0&&(e=0):e>n&&(e=n),(t=void 0===t?n:~~t)<0?(t+=n)<0&&(t=0):t>n&&(t=n),t<e&&(t=e);const r=this.subarray(e,t);return Object.setPrototypeOf(r,c.prototype),r},c.prototype.readUintLE=c.prototype.readUIntLE=function(e,t,n){e>>>=0,t>>>=0,n||k(e,t,this.length);let r=this[e],a=1,i=0;for(;++i<t&&(a*=256);)r+=this[e+i]*a;return r},c.prototype.readUintBE=c.prototype.readUIntBE=function(e,t,n){e>>>=0,t>>>=0,n||k(e,t,this.length);let r=this[e+--t],a=1;for(;t>0&&(a*=256);)r+=this[e+--t]*a;return r},c.prototype.readUint8=c.prototype.readUInt8=function(e,t){return e>>>=0,t||k(e,1,this.length),this[e]},c.prototype.readUint16LE=c.prototype.readUInt16LE=function(e,t){return e>>>=0,t||k(e,2,this.length),this[e]|this[e+1]<<8},c.prototype.readUint16BE=c.prototype.readUInt16BE=function(e,t){return e>>>=0,t||k(e,2,this.length),this[e]<<8|this[e+1]},c.prototype.readUint32LE=c.prototype.readUInt32LE=function(e,t){return e>>>=0,t||k(e,4,this.length),(this[e]|this[e+1]<<8|this[e+2]<<16)+16777216*this[e+3]},c.prototype.readUint32BE=c.prototype.readUInt32BE=function(e,t){return e>>>=0,t||k(e,4,this.length),16777216*this[e]+(this[e+1]<<16|this[e+2]<<8|this[e+3])},c.prototype.readBigUInt64LE=Q((function(e){H(e>>>=0,"offset");const t=this[e],n=this[e+7];void 0!==t&&void 0!==n||z(e,this.length-8);const r=t+256*this[++e]+65536*this[++e]+this[++e]*2**24,a=this[++e]+256*this[++e]+65536*this[++e]+n*2**24;return BigInt(r)+(BigInt(a)<<BigInt(32))})),c.prototype.readBigUInt64BE=Q((function(e){H(e>>>=0,"offset");const t=this[e],n=this[e+7];void 0!==t&&void 0!==n||z(e,this.length-8);const r=t*2**24+65536*this[++e]+256*this[++e]+this[++e],a=this[++e]*2**24+65536*this[++e]+256*this[++e]+n;return(BigInt(r)<<BigInt(32))+BigInt(a)})),c.prototype.readIntLE=function(e,t,n){e>>>=0,t>>>=0,n||k(e,t,this.length);let r=this[e],a=1,i=0;for(;++i<t&&(a*=256);)r+=this[e+i]*a;return a*=128,r>=a&&(r-=Math.pow(2,8*t)),r},c.prototype.readIntBE=function(e,t,n){e>>>=0,t>>>=0,n||k(e,t,this.length);let r=t,a=1,i=this[e+--r];for(;r>0&&(a*=256);)i+=this[e+--r]*a;return a*=128,i>=a&&(i-=Math.pow(2,8*t)),i},c.prototype.readInt8=function(e,t){return e>>>=0,t||k(e,1,this.length),128&this[e]?-1*(255-this[e]+1):this[e]},c.prototype.readInt16LE=function(e,t){e>>>=0,t||k(e,2,this.length);const n=this[e]|this[e+1]<<8;return 32768&n?4294901760|n:n},c.prototype.readInt16BE=function(e,t){e>>>=0,t||k(e,2,this.length);const n=this[e+1]|this[e]<<8;return 32768&n?4294901760|n:n},c.prototype.readInt32LE=function(e,t){return e>>>=0,t||k(e,4,this.length),this[e]|this[e+1]<<8|this[e+2]<<16|this[e+3]<<24},c.prototype.readInt32BE=function(e,t){return e>>>=0,t||k(e,4,this.length),this[e]<<24|this[e+1]<<16|this[e+2]<<8|this[e+3]},c.prototype.readBigInt64LE=Q((function(e){H(e>>>=0,"offset");const t=this[e],n=this[e+7];void 0!==t&&void 0!==n||z(e,this.length-8);const r=this[e+4]+256*this[e+5]+65536*this[e+6]+(n<<24);return(BigInt(r)<<BigInt(32))+BigInt(t+256*this[++e]+65536*this[++e]+this[++e]*2**24)})),c.prototype.readBigInt64BE=Q((function(e){H(e>>>=0,"offset");const t=this[e],n=this[e+7];void 0!==t&&void 0!==n||z(e,this.length-8);const r=(t<<24)+65536*this[++e]+256*this[++e]+this[++e];return(BigInt(r)<<BigInt(32))+BigInt(this[++e]*2**24+65536*this[++e]+256*this[++e]+n)})),c.prototype.readFloatLE=function(e,t){return e>>>=0,t||k(e,4,this.length),a.read(this,e,!0,23,4)},c.prototype.readFloatBE=function(e,t){return e>>>=0,t||k(e,4,this.length),a.read(this,e,!1,23,4)},c.prototype.readDoubleLE=function(e,t){return e>>>=0,t||k(e,8,this.length),a.read(this,e,!0,52,8)},c.prototype.readDoubleBE=function(e,t){return e>>>=0,t||k(e,8,this.length),a.read(this,e,!1,52,8)},c.prototype.writeUintLE=c.prototype.writeUIntLE=function(e,t,n,r){e=+e,t>>>=0,n>>>=0,r||x(this,e,t,n,Math.pow(2,8*n)-1,0);let a=1,i=0;for(this[t]=255&e;++i<n&&(a*=256);)this[t+i]=e/a&255;return t+n},c.prototype.writeUintBE=c.prototype.writeUIntBE=function(e,t,n,r){e=+e,t>>>=0,n>>>=0,r||x(this,e,t,n,Math.pow(2,8*n)-1,0);let a=n-1,i=1;for(this[t+a]=255&e;--a>=0&&(i*=256);)this[t+a]=e/i&255;return t+n},c.prototype.writeUint8=c.prototype.writeUInt8=function(e,t,n){return e=+e,t>>>=0,n||x(this,e,t,1,255,0),this[t]=255&e,t+1},c.prototype.writeUint16LE=c.prototype.writeUInt16LE=function(e,t,n){return e=+e,t>>>=0,n||x(this,e,t,2,65535,0),this[t]=255&e,this[t+1]=e>>>8,t+2},c.prototype.writeUint16BE=c.prototype.writeUInt16BE=function(e,t,n){return e=+e,t>>>=0,n||x(this,e,t,2,65535,0),this[t]=e>>>8,this[t+1]=255&e,t+2},c.prototype.writeUint32LE=c.prototype.writeUInt32LE=function(e,t,n){return e=+e,t>>>=0,n||x(this,e,t,4,4294967295,0),this[t+3]=e>>>24,this[t+2]=e>>>16,this[t+1]=e>>>8,this[t]=255&e,t+4},c.prototype.writeUint32BE=c.prototype.writeUInt32BE=function(e,t,n){return e=+e,t>>>=0,n||x(this,e,t,4,4294967295,0),this[t]=e>>>24,this[t+1]=e>>>16,this[t+2]=e>>>8,this[t+3]=255&e,t+4},c.prototype.writeBigUInt64LE=Q((function(e,t=0){return M(this,e,t,BigInt(0),BigInt("0xffffffffffffffff"))})),c.prototype.writeBigUInt64BE=Q((function(e,t=0){return _(this,e,t,BigInt(0),BigInt("0xffffffffffffffff"))})),c.prototype.writeIntLE=function(e,t,n,r){if(e=+e,t>>>=0,!r){const r=Math.pow(2,8*n-1);x(this,e,t,n,r-1,-r)}let a=0,i=1,o=0;for(this[t]=255&e;++a<n&&(i*=256);)e<0&&0===o&&0!==this[t+a-1]&&(o=1),this[t+a]=(e/i>>0)-o&255;return t+n},c.prototype.writeIntBE=function(e,t,n,r){if(e=+e,t>>>=0,!r){const r=Math.pow(2,8*n-1);x(this,e,t,n,r-1,-r)}let a=n-1,i=1,o=0;for(this[t+a]=255&e;--a>=0&&(i*=256);)e<0&&0===o&&0!==this[t+a+1]&&(o=1),this[t+a]=(e/i>>0)-o&255;return t+n},c.prototype.writeInt8=function(e,t,n){return e=+e,t>>>=0,n||x(this,e,t,1,127,-128),e<0&&(e=255+e+1),this[t]=255&e,t+1},c.prototype.writeInt16LE=function(e,t,n){return e=+e,t>>>=0,n||x(this,e,t,2,32767,-32768),this[t]=255&e,this[t+1]=e>>>8,t+2},c.prototype.writeInt16BE=function(e,t,n){return e=+e,t>>>=0,n||x(this,e,t,2,32767,-32768),this[t]=e>>>8,this[t+1]=255&e,t+2},c.prototype.writeInt32LE=function(e,t,n){return e=+e,t>>>=0,n||x(this,e,t,4,2147483647,-2147483648),this[t]=255&e,this[t+1]=e>>>8,this[t+2]=e>>>16,this[t+3]=e>>>24,t+4},c.prototype.writeInt32BE=function(e,t,n){return e=+e,t>>>=0,n||x(this,e,t,4,2147483647,-2147483648),e<0&&(e=4294967295+e+1),this[t]=e>>>24,this[t+1]=e>>>16,this[t+2]=e>>>8,this[t+3]=255&e,t+4},c.prototype.writeBigInt64LE=Q((function(e,t=0){return M(this,e,t,-BigInt("0x8000000000000000"),BigInt("0x7fffffffffffffff"))})),c.prototype.writeBigInt64BE=Q((function(e,t=0){return _(this,e,t,-BigInt("0x8000000000000000"),BigInt("0x7fffffffffffffff"))})),c.prototype.writeFloatLE=function(e,t,n){return P(this,e,t,!0,n)},c.prototype.writeFloatBE=function(e,t,n){return P(this,e,t,!1,n)},c.prototype.writeDoubleLE=function(e,t,n){return D(this,e,t,!0,n)},c.prototype.writeDoubleBE=function(e,t,n){return D(this,e,t,!1,n)},c.prototype.copy=function(e,t,n,r){if(!c.isBuffer(e))throw new TypeError("argument should be a Buffer");if(n||(n=0),r||0===r||(r=this.length),t>=e.length&&(t=e.length),t||(t=0),r>0&&r<n&&(r=n),r===n)return 0;if(0===e.length||0===this.length)return 0;if(t<0)throw new RangeError("targetStart out of bounds");if(n<0||n>=this.length)throw new RangeError("Index out of range");if(r<0)throw new RangeError("sourceEnd out of bounds");r>this.length&&(r=this.length),e.length-t<r-n&&(r=e.length-t+n);const a=r-n;return this===e&&"function"==typeof Uint8Array.prototype.copyWithin?this.copyWithin(t,n,r):Uint8Array.prototype.set.call(e,this.subarray(n,r),t),a},c.prototype.fill=function(e,t,n,r){if("string"==typeof e){if("string"==typeof t?(r=t,t=0,n=this.length):"string"==typeof n&&(r=n,n=this.length),void 0!==r&&"string"!=typeof r)throw new TypeError("encoding must be a string");if("string"==typeof r&&!c.isEncoding(r))throw new TypeError("Unknown encoding: "+r);if(1===e.length){const t=e.charCodeAt(0);("utf8"===r&&t<128||"latin1"===r)&&(e=t)}}else"number"==typeof e?e&=255:"boolean"==typeof e&&(e=Number(e));if(t<0||this.length<t||this.length<n)throw new RangeError("Out of range index");if(n<=t)return this;let a;if(t>>>=0,n=void 0===n?this.length:n>>>0,e||(e=0),"number"==typeof e)for(a=t;a<n;++a)this[a]=e;else{const i=c.isBuffer(e)?e:c.from(e,r),o=i.length;if(0===o)throw new TypeError('The value "'+e+'" is invalid for argument "value"');for(a=0;a<n-t;++a)this[a+t]=i[a%o]}return this};const $={};function F(e,t,n){$[e]=class extends n{constructor(){super(),Object.defineProperty(this,"message",{value:t.apply(this,arguments),writable:!0,configurable:!0}),this.name=`${this.name} [${e}]`,this.stack,delete this.name}get code(){return e}set code(e){Object.defineProperty(this,"code",{configurable:!0,enumerable:!0,value:e,writable:!0})}toString(){return`${this.name} [${e}]: ${this.message}`}}}function j(e){let t="",n=e.length;const r="-"===e[0]?1:0;for(;n>=r+4;n-=3)t=`_${e.slice(n-3,n)}${t}`;return`${e.slice(0,n)}${t}`}function q(e,t,n,r,a,i){if(e>n||e<t){const r="bigint"==typeof t?"n":"";let a;throw a=i>3?0===t||t===BigInt(0)?`>= 0${r} and < 2${r} ** ${8*(i+1)}${r}`:`>= -(2${r} ** ${8*(i+1)-1}${r}) and < 2 ** ${8*(i+1)-1}${r}`:`>= ${t}${r} and <= ${n}${r}`,new $.ERR_OUT_OF_RANGE("value",a,e)}!function(e,t,n){H(t,"offset"),void 0!==e[t]&&void 0!==e[t+n]||z(t,e.length-(n+1))}(r,a,i)}function H(e,t){if("number"!=typeof e)throw new $.ERR_INVALID_ARG_TYPE(t,"number",e)}function z(e,t,n){if(Math.floor(e)!==e)throw H(e,n),new $.ERR_OUT_OF_RANGE(n||"offset","an integer",e);if(t<0)throw new $.ERR_BUFFER_OUT_OF_BOUNDS;throw new $.ERR_OUT_OF_RANGE(n||"offset",`>= ${n?1:0} and <= ${t}`,e)}F("ERR_BUFFER_OUT_OF_BOUNDS",(function(e){return e?`${e} is outside of buffer bounds`:"Attempt to access memory outside buffer bounds"}),RangeError),F("ERR_INVALID_ARG_TYPE",(function(e,t){return`The "${e}" argument must be of type number. Received type ${typeof t}`}),TypeError),F("ERR_OUT_OF_RANGE",(function(e,t,n){let r=`The value of "${e}" is out of range.`,a=n;return Number.isInteger(n)&&Math.abs(n)>2**32?a=j(String(n)):"bigint"==typeof n&&(a=String(n),(n>BigInt(2)**BigInt(32)||n<-(BigInt(2)**BigInt(32)))&&(a=j(a)),a+="n"),r+=` It must be ${t}. Received ${a}`,r}),RangeError);const W=/[^+/0-9A-Za-z-_]/g;function G(e,t){let n;t=t||1/0;const r=e.length;let a=null;const i=[];for(let o=0;o<r;++o){if(n=e.charCodeAt(o),n>55295&&n<57344){if(!a){if(n>56319){(t-=3)>-1&&i.push(239,191,189);continue}if(o+1===r){(t-=3)>-1&&i.push(239,191,189);continue}a=n;continue}if(n<56320){(t-=3)>-1&&i.push(239,191,189),a=n;continue}n=65536+(a-55296<<10|n-56320)}else a&&(t-=3)>-1&&i.push(239,191,189);if(a=null,n<128){if((t-=1)<0)break;i.push(n)}else if(n<2048){if((t-=2)<0)break;i.push(n>>6|192,63&n|128)}else if(n<65536){if((t-=3)<0)break;i.push(n>>12|224,n>>6&63|128,63&n|128)}else{if(!(n<1114112))throw new Error("Invalid code point");if((t-=4)<0)break;i.push(n>>18|240,n>>12&63|128,n>>6&63|128,63&n|128)}}return i}function V(e){return r.toByteArray(function(e){if((e=(e=e.split("=")[0]).trim().replace(W,"")).length<2)return"";for(;e.length%4!=0;)e+="=";return e}(e))}function Y(e,t,n,r){let a;for(a=0;a<r&&!(a+n>=t.length||a>=e.length);++a)t[a+n]=e[a];return a}function J(e,t){return e instanceof t||null!=e&&null!=e.constructor&&null!=e.constructor.name&&e.constructor.name===t.name}function Z(e){return e!=e}const K=function(){const e="0123456789abcdef",t=new Array(256);for(let n=0;n<16;++n){const r=16*n;for(let a=0;a<16;++a)t[r+a]=e[n]+e[a]}return t}();function Q(e){return"undefined"==typeof BigInt?X:e}function X(){throw new Error("BigInt not supported")}},645:(e,t)=>{t.read=function(e,t,n,r,a){var i,o,s=8*a-r-1,c=(1<<s)-1,l=c>>1,u=-7,f=n?a-1:0,d=n?-1:1,m=e[t+f];for(f+=d,i=m&(1<<-u)-1,m>>=-u,u+=s;u>0;i=256*i+e[t+f],f+=d,u-=8);for(o=i&(1<<-u)-1,i>>=-u,u+=r;u>0;o=256*o+e[t+f],f+=d,u-=8);if(0===i)i=1-l;else{if(i===c)return o?NaN:1/0*(m?-1:1);o+=Math.pow(2,r),i-=l}return(m?-1:1)*o*Math.pow(2,i-r)},t.write=function(e,t,n,r,a,i){var o,s,c,l=8*i-a-1,u=(1<<l)-1,f=u>>1,d=23===a?Math.pow(2,-24)-Math.pow(2,-77):0,m=r?0:i-1,h=r?1:-1,p=t<0||0===t&&1/t<0?1:0;for(t=Math.abs(t),isNaN(t)||t===1/0?(s=isNaN(t)?1:0,o=u):(o=Math.floor(Math.log(t)/Math.LN2),t*(c=Math.pow(2,-o))<1&&(o--,c*=2),(t+=o+f>=1?d/c:d*Math.pow(2,1-f))*c>=2&&(o++,c/=2),o+f>=u?(s=0,o=u):o+f>=1?(s=(t*c-1)*Math.pow(2,a),o+=f):(s=t*Math.pow(2,f-1)*Math.pow(2,a),o=0));a>=8;e[n+m]=255&s,m+=h,s/=256,a-=8);for(o=o<<a|s,l+=a;l>0;e[n+m]=255&o,m+=h,o/=256,l-=8);e[n+m-h]|=128*p}}},t={};function n(r){var a=t[r];if(void 0!==a)return a.exports;var i=t[r]={exports:{}};return e[r](i,i.exports,n),i.exports}(()=>{const e=n(832),t=n(401),r=n(986),a=n(984),i=n(911),o=n(316),s=n(856),c=n(333);n(603),window.onload=async()=>{const n=await fetch("/getToken"),l=await n.json();if(null!=document.getElementById("navbar")){ReactDOM.render(React.createElement(s.Navbar,{csrf:l.csrfToken}),document.getElementById("navbar"));const e={renderLoginWindow:o.renderLoginWindow,renderSignUpWindow:o.renderSignUpWindow};s.initializeNavbar(e,l.csrfToken)}let u=document.querySelector("header").getAttribute("data-current-page");switch(u){case"create":e.init();break;case"editNovel":t.init();break;case"editChapter":r.init();break;case"home":a.init();break;case"library":i.init();break;case"login":await o.init(),"true"===localStorage.getItem("partchment-LoadSignUp")&&(console.log("controller login"),console.log(l),o.renderSignUpWindow({_csrf:l.csrfToken}),window.localStorage.setItem("partchment-LoadSignUp",!1)),s.updateSelectedPage();break;case"profile":c.init();break;default:console.log(`unknown page: ${u}`)}}})()})();